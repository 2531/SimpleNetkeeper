aW1wb3J0IHVybGxpYjIKaW1wb3J0IG9zCmltcG9ydCBzeXMKZnJvbSBQS0NTN0VuY29kZXIgaW1w
b3J0IFBLQ1M3RW5jb2RlcgppbXBvcnQgY29weQpmcm9tIENyeXB0by5DaXBoZXIgaW1wb3J0IEFF
UwoKRU5DT0RFUj1QS0NTN0VuY29kZXIoKQoKSEVBREVSID0gewoJIkNvbm5lY3Rpb24iOiJLZWVw
LUFsaXZlIiwKCSJBcHAiOiJIQlpEIiwKCSJVc2VyLUFnZW50IjoiIE1vemlsbGEvQW5kcm9pZC82
LjAvTGV0diBYNjIwL2ZmZmZmZmZmLTk0MDQtODAyZi1mZmZmLWZmZmY4OWExMjkyNiIsCgkiSG9z
dCI6IjU4LjUzLjE5Ni4xNjU6ODA4MCIKfQoKUEFTU1dPUkRfS0VZPSJwYXNzMDEyMzQ1Njc4OTEw
IgpTRVNTSU9OX0tFWT0ianlhbmd6aTVAMTYzLmNvbSIKClNWUj0iNTguNTMuMTk2LjE2NTo4MDgw
IgpVUkw9Imh0dHA6Ly81OC41My4xOTYuMTY1OjgwODAvd2YuZG8/ZGV2aWNlPVBob25lJTNBTGV0
ditYNjIwJTVDU0RLJTNBMjMmY2xpZW50VHlwZT1hbmRyb2lkJmNvZGU9MSZ2ZXJzaW9uPTYuMCZj
bGllbnRpcD0xMDAuNjQuMjUwLjczIgoKCmRlZiBwYWQocyk6CglyZXR1cm4gRU5DT0RFUi5lbmNv
ZGUocykKCmRlZiB1bnBhZChzKToKCXJldHVybiBFTkNPREVSLmRlY29kZShzKQoKZGVmIGhleGMo
c3RyZGF0YSk6Cglsc3QgPSBbXQoJZm9yIGNoIGluIHN0cmRhdGE6CgkJaHYgPSBoZXgob3JkKGNo
KSkucmVwbGFjZSgnMHgnLCAnJykKCQlpZiBsZW4oaHYpID09IDE6CgkJCWh2ID0gIjAiICsgaHYK
CQlsc3QuYXBwZW5kKGh2KQoJcyA9IHJlZHVjZShsYW1iZGEgeCx5OngreSwgbHN0KQoJcmV0dXJu
IHMudXBwZXIoKQoKZGVmIGVuY3J5cHQoZGF0YSAsIGtleSk6CglvYmogPSBBRVMubmV3KGtleSAs
IEFFUy5NT0RFX0VDQikKCWVuYyA9IG9iai5lbmNyeXB0KHBhZChkYXRhKSkKCXJldHVybiBoZXhj
KGVuYykKCmRlZiBhdXRoKG5hbWUgLCBwYXNzd29yZCAsIHNlc3Npb24gLCBjb29raWUgLCBpcCk6
CglkYXRhID0gInBhc3N3b3JkPSVzJmNsaWVudFR5cGU9YW5kcm9pZCZ1c2VybmFtZT0lcyZrZXk9
JXMmY29kZT04JmNsaWVudGlwPSVzIiAlIChlbmNyeXB0KHBhc3N3b3JkICwgUEFTU1dPUkRfS0VZ
KSAsIG5hbWUgLCBlbmNyeXB0KHNlc3Npb24gLCBTRVNTSU9OX0tFWSkgLGlwICkKCWhlYWRlcnMg
PSBjb3B5LmRlZXBjb3B5KEhFQURFUikKCWhlYWRlcnNbIkNvb2tpZSJdID0gY29va2llCglyZXEg
PSAgdXJsbGliMi5SZXF1ZXN0KCJodHRwOi8vJXMvd2YuZG8iICUgU1ZSICwgZGF0YSAsIGhlYWRl
cnMpCglyZXNwb25zZSA9IHVybGxpYjIudXJsb3BlbihyZXEpCglyZXR1cm4gcmVzcG9uc2UucmVh
ZCgpCgoKZGVmIGdldHVybCgpOgoJI3JldHVybiBVUkwKCXJlc3BvbnNlID0gdXJsbGliMi51cmxv
cGVuKCdodHRwOi8vd3d3LnFxLmNvbScpCglyZXR1cm4gcmVzcG9uc2UuZ2V0dXJsKCkKCmRlZiBn
ZXRzZXNzKCk6Cgl1cmwgPSBnZXR1cmwoKQoJaWYgdXJsLmZpbmQoU1ZSKSA8IDA6CgkJcHJpbnQg
IlNWUiBBRERSIE5PVCBGT1VORCIKCQlyZXR1cm4gIiIgLCAiIiAsICIiCglpcF9pbmRleCA9IHVy
bC5maW5kKCJpcD0iKQoJaWYgaXBfaW5kZXggPCAwOgoJCXByaW50ICJJUCBBRERSIE5PVCBGT1VO
RCIKCQlyZXR1cm4gIiIgLCAiIiAsICIiCglpcF9uZXh0ID0gdXJsLmZpbmQoIiYiICwgaXBfaW5k
ZXggKyAzKQoJaXAgPSAiIgoJaWYgaXBfbmV4dCA8IDA6CgkJaXAgPSB1cmxbaXBfaW5kZXggKyAz
Ol0KCWVsc2U6CQoJCWlwID0gdXJsW2lwX2luZGV4ICsgMyA6IGlwX25leHQgXQkKCglyZXEgPSB1
cmxsaWIyLlJlcXVlc3QoVVJMKQoJZm9yIHggaW4gSEVBREVSOgoJCXJlcS5hZGRfaGVhZGVyKHgg
LCBIRUFERVJbeF0pCglyZXNwb25zZSA9IHVybGxpYjIudXJsb3BlbihyZXEpCglyZXNwID0gcmVz
cG9uc2UucmVhZCgpCgloZWFkZXIgPSByZXNwb25zZS5pbmZvKCkuaGVhZGVycwoJY29va2llID0g
IiIKCWZvciB4IGluIGhlYWRlcjoKCQlpZiB4LmZpbmQoIkNvb2tpZSIpID49IDA6CgkJCWNvb2tp
ZSA9IHhbOjddCgkJCWJyZWFrCglyZXR1cm4gcmVzcCAsIGNvb2tpZSAsIGlwCgppZiBfX25hbWVf
XyA9PSAiX19tYWluX18iOgoJaWYgbGVuKHN5cy5hcmd2KSA8IDM6CgkJcHJpbnQgIkFyZ3M6IFt1
c2VybmFtZV0gW3Bhc3N3b3JkXSIKCQlzeXMuZXhpdCgpCglzZXNzICwgY29va2llICwgaXAgPSBn
ZXRzZXNzKCkKCWlmIGxlbihjb29raWUpID09IDA6CgkJcHJpbnQgIlJlc3BvbnNlIHNlc3Npb24g
ZmFpbGVkLiBTZXNzWyVzXSBDb29raWVbJXNdIElQWyVzXSIgJSAoc2VzcyAsIGNvb2tpZSAsIGlw
KQoJCXN5cy5leGl0KCkKCW5hbWUgPSBzeXMuYXJndlsxXQoJcGFzc3dkID0gc3lzLmFyZ3ZbMl0K
CXByaW50ICJMb2dpbiBQYXJhbSBbJXNdWyVzXSBXaXRoIFslc11bJXNdIFslc10iICUgKG5hbWUg
LCBwYXNzd2QgLCBzZXNzICwgY29va2llICwgaXApCglyZXQgPSBhdXRoKG5hbWUgLCBwYXNzd2Qg
LCBzZXNzICwgY29va2llICxpcCkKCWlmIHJldC5maW5kKCJhdXRoMDAiKSA+PSAwOgoJCXByaW50
ICJTdWNjZXNzIgoJZWxzZToKCQlwcmludCAiRmFpbGVkIDogJXMiICUgcmV0Cg==
